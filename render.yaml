# Render Blueprint for Polymarket Trading Agent
# Docs: https://render.com/docs/blueprint-spec

services:
  # Agent - runs as a cron job every 6 hours
  - type: cron
    name: polymarket-agent
    env: node
    region: oregon
    plan: free
    schedule: "0 */6 * * *"  # Every 6 hours
    buildCommand: cd agent && npm install
    startCommand: cd agent && npm start
    envVars:
      - key: OPENROUTER_API_KEY
        sync: false  # You'll set this manually in Render dashboard
      - key: TELEGRAM_BOT_TOKEN
        sync: false  # Set in Render dashboard for notifications
      - key: TELEGRAM_CHAT_ID
        sync: false  # Set in Render dashboard for notifications
      - key: GITHUB_TOKEN
        sync: false  # GitHub PAT for pushing CSV updates
      - key: NODE_ENV
        value: production

  # Dashboard - static site
  - type: web
    name: polymarket-dashboard
    env: static
    staticPublishPath: dashboard/out
    buildCommand: cd dashboard && npm install && npm run build
    routes:
      - type: rewrite
        source: /*
        destination: /index.html
